<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>New-user cohort studies with the HADES CohortMethod Package — CohortMethodModule • Strategus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="New-user cohort studies with the HADES CohortMethod Package — CohortMethodModule"><meta name="description" content="Module for performing new-user cohort studies against
the OMOP Common Data Model"><meta property="og:description" content="Module for performing new-user cohort studies against
the OMOP Common Data Model"><link rel="stylesheet" type="text/css" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Strategus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/IntroductionToStrategus.html">Introduction to Strategus</a></li>
    <li><a class="dropdown-item" href="../articles/CreatingAnalysisSpecification.html">Creating Analysis Specification</a></li>
    <li><a class="dropdown-item" href="../articles/ExecuteStrategus.html">Execute Strategus</a></li>
    <li><a class="dropdown-item" href="../articles/WorkingWithResults.html">Working With Results</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../results-schema/index.html">Results model documentation</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades" aria-label="hadesLogo">hadesLogo</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/Strategus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>New-user cohort studies with the <a href="https://ohdsi.github.io/CohortMethod/" class="external-link">HADES CohortMethod Package</a></h1>
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/Strategus/blob/main/R/Module-CohortMethod.R" class="external-link"><code>R/Module-CohortMethod.R</code></a></small>
      <div class="d-none name"><code>CohortMethodModule.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Module for performing new-user cohort studies against
the OMOP Common Data Model</p>
    </div>


    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="StrategusModule.html">Strategus::StrategusModule</a></code> -&gt; <code>CohortMethodModule</code></p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-CohortMethodModule-new"><code>CohortMethodModule$new()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-execute"><code>CohortMethodModule$execute()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-createResultsDataModel"><code>CohortMethodModule$createResultsDataModel()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-getResultsDataModelSpecification"><code>CohortMethodModule$getResultsDataModelSpecification()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-uploadResults"><code>CohortMethodModule$uploadResults()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-createModuleSpecifications"><code>CohortMethodModule$createModuleSpecifications()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-validateModuleSpecifications"><code>CohortMethodModule$validateModuleSpecifications()</code></a></p></li>
<li><p><a href="#method-CohortMethodModule-clone"><code>CohortMethodModule$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="Strategus" data-topic="StrategusModule" data-id="createSharedResourcesSpecifications"><a href="StrategusModule.html#method-createSharedResourcesSpecifications"><code>Strategus::StrategusModule$createSharedResourcesSpecifications()</code></a></span></li>
<li><span class="pkg-link" data-pkg="Strategus" data-topic="StrategusModule" data-id="validateSharedResourcesSpecifications"><a href="StrategusModule.html#method-validateSharedResourcesSpecifications"><code>Strategus::StrategusModule$validateSharedResourcesSpecifications()</code></a></span></li>
</ul></details></p><hr><a id="method-CohortMethodModule-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialize the module</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/CohortMethodModule.html">CohortMethodModule</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-CohortMethodModule-execute"></a><div class="section">
<h3 id="method-execute-">Method <code><a href="execute.html">execute()</a></code><a class="anchor" aria-label="anchor" href="#method-execute-"></a></h3>
<p>Executes the CohortMethod package</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">execute</span><span class="op">(</span></span>
<span>  <span class="va">connectionDetails</span>,</span>
<span>  <span class="va">analysisSpecifications</span>,</span>
<span>  <span class="va">executionSettings</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>connectionDetails</code></dt>
<dd><p>An object of class <code>connectionDetails</code> as created by the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">DatabaseConnector::createConnectionDetails()</a></code> function.</p></dd>


<dt><code>analysisSpecifications</code></dt>
<dd><p>The analysis specifications for the study</p></dd>


<dt><code>executionSettings</code></dt>
<dd><p>An object of type <code>ExecutionSettings</code> as created
by <code><a href="createCdmExecutionSettings.html">createCdmExecutionSettings()</a></code> or <code><a href="createResultsExecutionSettings.html">createResultsExecutionSettings()</a></code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CohortMethodModule-createResultsDataModel"></a><div class="section">
<h3 id="method-createresultsdatamodel-">Method <code>createResultsDataModel()</code><a class="anchor" aria-label="anchor" href="#method-createresultsdatamodel-"></a></h3>
<p>Create the results data model for the module</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">createResultsDataModel</span><span class="op">(</span></span>
<span>  <span class="va">resultsConnectionDetails</span>,</span>
<span>  <span class="va">resultsDatabaseSchema</span>,</span>
<span>  tablePrefix <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>resultsConnectionDetails</code></dt>
<dd><p>The connection details to the results database which
is an object of class <code>connectionDetails</code> as created by the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">DatabaseConnector::createConnectionDetails()</a></code> function.</p></dd>


<dt><code>resultsConnectionDetails</code></dt>
<dd><p>The connection details to the results database which
is an object of class <code>connectionDetails</code> as created by the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">DatabaseConnector::createConnectionDetails()</a></code> function.</p></dd>


<dt><code>resultsDatabaseSchema</code></dt>
<dd><p>The schema in the results database that holds the results data model.</p></dd>


<dt><code>tablePrefix</code></dt>
<dd><p>A prefix to apply to the database table names (optional).</p></dd>


<dt><code>tablePrefix</code></dt>
<dd><p>A prefix to apply to the database table names (optional).</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CohortMethodModule-getResultsDataModelSpecification"></a><div class="section">
<h3 id="method-getresultsdatamodelspecification-">Method <code>getResultsDataModelSpecification()</code><a class="anchor" aria-label="anchor" href="#method-getresultsdatamodelspecification-"></a></h3>
<p>Get the results data model specification for the module</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">getResultsDataModelSpecification</span><span class="op">(</span>tablePrefix <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>tablePrefix</code></dt>
<dd><p>A prefix to apply to the database table names (optional).</p></dd>


<dt><code>tablePrefix</code></dt>
<dd><p>A prefix to apply to the database table names (optional).</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CohortMethodModule-uploadResults"></a><div class="section">
<h3 id="method-uploadresults-">Method <code><a href="uploadResults.html">uploadResults()</a></code><a class="anchor" aria-label="anchor" href="#method-uploadresults-"></a></h3>
<p>Upload the results for the module</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">uploadResults</span><span class="op">(</span></span>
<span>  <span class="va">resultsConnectionDetails</span>,</span>
<span>  <span class="va">analysisSpecifications</span>,</span>
<span>  <span class="va">resultsDataModelSettings</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>resultsConnectionDetails</code></dt>
<dd><p>The connection details to the results database which
is an object of class <code>connectionDetails</code> as created by the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">DatabaseConnector::createConnectionDetails()</a></code> function.</p></dd>


<dt><code>resultsConnectionDetails</code></dt>
<dd><p>The connection details to the results database which
is an object of class <code>connectionDetails</code> as created by the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">DatabaseConnector::createConnectionDetails()</a></code> function.</p></dd>


<dt><code>analysisSpecifications</code></dt>
<dd><p>An object of type <code>AnalysisSpecifications</code> as created
by <code><a href="createEmptyAnalysisSpecificiations.html">createEmptyAnalysisSpecificiations()</a></code>.</p></dd>


<dt><code>resultsDataModelSettings</code></dt>
<dd><p>The results data model settings as created using [@seealso <code><a href="createResultsDataModelSettings.html">createResultsDataModelSettings()</a></code>]</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CohortMethodModule-createModuleSpecifications"></a><div class="section">
<h3 id="method-createmodulespecifications-">Method <code>createModuleSpecifications()</code><a class="anchor" aria-label="anchor" href="#method-createmodulespecifications-"></a></h3>
<p>Creates the CohortMethod Module Specifications</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">createModuleSpecifications</span><span class="op">(</span></span>
<span>  <span class="va">cmAnalysisList</span>,</span>
<span>  <span class="va">targetComparatorOutcomesList</span>,</span>
<span>  analysesToExclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  refitPsForEveryOutcome <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  refitPsForEveryStudyPopulation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cmDiagnosticThresholds <span class="op">=</span> <span class="fu">CohortMethod</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html" class="external-link">createCmDiagnosticThresholds</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>cmAnalysisList</code></dt>
<dd><p>A list of objects of type <code>cmAnalysis</code> as created using
the `<a href="https://ohdsi.github.io/CohortMethod/reference/createCmAnalysis.html" class="external-link">CohortMethod::createCmAnalysis</a> function.</p></dd>


<dt><code>targetComparatorOutcomesList</code></dt>
<dd><p>A list of objects of type <code>targetComparatorOutcomes</code> as
created using the <a href="https://ohdsi.github.io/CohortMethod/reference/createTargetComparatorOutcomes.html" class="external-link">CohortMethod::createTargetComparatorOutcomes</a>
function.</p></dd>


<dt><code>analysesToExclude</code></dt>
<dd><p>Analyses to exclude. See the Analyses to Exclude section for details.</p></dd>


<dt><code>refitPsForEveryOutcome</code></dt>
<dd><p>Should the propensity model be fitted for every outcome (i.e.
after people who already had the outcome are removed)? If
false, a single propensity model will be fitted, and people
who had the outcome previously will be removed afterwards.</p></dd>


<dt><code>refitPsForEveryStudyPopulation</code></dt>
<dd><p>Should the propensity model be fitted for every study population
definition? If false, a single propensity model will be fitted,
and the study population criteria will be applied afterwards.</p></dd>


<dt><code>cmDiagnosticThresholds</code></dt>
<dd><p>An object of type <code>CmDiagnosticThresholds</code> as created using
<code><a href="https://ohdsi.github.io/CohortMethod/reference/createCmDiagnosticThresholds.html" class="external-link">CohortMethod::createCmDiagnosticThresholds()</a></code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>Run a list of analyses for the target-comparator-outcomes of interest. This function will run all
specified analyses against all hypotheses of interest, meaning that the total number of outcome
models is <code>length(cmAnalysisList) * length(targetComparatorOutcomesList)</code> (if all analyses specify an
outcome model should be fitted). When you provide several analyses it will determine whether any of
the analyses have anything in common, and will take advantage of this fact. For example, if we
specify several analyses that only differ in the way the outcome model is fitted, then this
function will extract the data and fit the propensity model only once, and re-use this in all the
analysis.</p>
<p>After completion, a tibble containing references to all generated files can be obtained using the
<code><a href="https://ohdsi.github.io/CohortMethod/reference/getFileReference.html" class="external-link">CohortMethod::getFileReference()</a></code> function. A summary of the analysis results can be obtained using the
<code><a href="https://ohdsi.github.io/CohortMethod/reference/getResultsSummary.html" class="external-link">CohortMethod::getResultsSummary()</a></code> function.</p><div class="section">
<h5 id="analyses-to-exclude">Analyses to Exclude<a class="anchor" aria-label="anchor" href="#analyses-to-exclude"></a></h5>


<p>Normally, <code>runCmAnalyses</code> will run all combinations of target-comparator-outcome-analyses settings.
However, sometimes we may not need all those combinations. Using the <code>analysesToExclude</code> argument,
we can remove certain items from the full matrix. This argument should be a data frame with at least
one of the following columns:</p>
</div>

</div>


</div><p></p><hr><a id="method-CohortMethodModule-validateModuleSpecifications"></a><div class="section">
<h3 id="method-validatemodulespecifications-">Method <code>validateModuleSpecifications()</code><a class="anchor" aria-label="anchor" href="#method-validatemodulespecifications-"></a></h3>
<p>Validate the module specifications</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">validateModuleSpecifications</span><span class="op">(</span><span class="va">moduleSpecifications</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>moduleSpecifications</code></dt>
<dd><p>The CohortMethod module specifications</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CohortMethodModule-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortMethodModule</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anthony Sena, Martijn Schuemie, Jamie Gilbert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

