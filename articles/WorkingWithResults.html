<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working With Results • Strategus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Working With Results">
<link rel="stylesheet" type="text/css" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Strategus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/IntroductionToStrategus.html">Introduction to Strategus</a></li>
    <li><a class="dropdown-item" href="../articles/CreatingAnalysisSpecification.html">Creating Analysis Specification</a></li>
    <li><a class="dropdown-item" href="../articles/ExecuteStrategus.html">Execute Strategus</a></li>
    <li><a class="dropdown-item" href="../articles/WorkingWithResults.html">Working With Results</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../results-schema/index.html">Results model documentation</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades" aria-label="hadesLogo">hadesLogo</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/Strategus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Working With Results</h1>
                        <h4 data-toc-skip class="author">Anthony G.
Sena</h4>
            
            <h4 data-toc-skip class="date">2025-06-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/Strategus/blob/main/vignettes/WorkingWithResults.Rmd" class="external-link"><code>vignettes/WorkingWithResults.Rmd</code></a></small>
      <div class="d-none name"><code>WorkingWithResults.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="working-with-results">Working With Results<a class="anchor" aria-label="anchor" href="#working-with-results"></a>
</h2>
<p>Once you have executed an analysis specification through
<code>Strategus</code> you will want to review results and share them
with a network study coordinator. This vignette will cover the ways in
which you can work with results produced by Strategus.</p>
<div class="section level3">
<h3 id="manual-review">Manual review<a class="anchor" aria-label="anchor" href="#manual-review"></a>
</h3>
<p>Each HADES module in an analysis specification will write results in
comma-separated value (csv) format to the file system in the
<code>resultsFolder</code> specified in the execution settings. These
files may be reviewed with your favorite text editor to ensure that any
policies related to censoring for your data source are met before
sharing with a network coordinator.</p>
</div>
<div class="section level3">
<h3 id="reviewing-results-using-r-shiny-results-viewer">Reviewing results using R Shiny results viewer<a class="anchor" aria-label="anchor" href="#reviewing-results-using-r-shiny-results-viewer"></a>
</h3>
<p>To review results produced by Strategus via the R Shiny, your results
must be loaded into a PostgreSQL database. Strategus and the HADES
modules provide a way to create the results database tables and upload
the results. This guide assumes that you have access to a PostgreSQL
instance with a database and schema called <code>study_results</code>
and permission to create tables &amp; upload results.</p>
<div class="section level4">
<h4 id="creating-the-results-data-model">Creating the results data model<a class="anchor" aria-label="anchor" href="#creating-the-results-data-model"></a>
</h4>
<p>In the code below, we start by creating the connection details to the
PostgreSQL instance that we will use to create the results data model.
Next, we’ll create the <code>resultsDataModelSettings</code> to specify
the schema to hold the results data model and the location where the
Strategus results are stored on the file system. Finally, we’ll create
the results data model by passing in the
<code>analysisSpecification</code> for the study which will detail which
module’s results tables to include in the results data model.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resultsConnectionDetails</span> <span class="op">&lt;-</span> <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></span><span class="op">(</span></span>
<span>  dbms <span class="op">=</span> <span class="st">"postgresql"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"user"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"password"</span>,</span>
<span>  server <span class="op">=</span> <span class="st">"127.0.0.1/strategus_results"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">resultsDataModelSettings</span> <span class="op">&lt;-</span> <span class="fu">Strategus</span><span class="fu">::</span><span class="fu"><a href="../reference/createResultsDataModelSettings.html">createResultsDataModelSettings</a></span><span class="op">(</span></span>
<span>  resultsDatabaseSchema <span class="op">=</span> <span class="st">"study_results"</span>,</span>
<span>  resultsFolder <span class="op">=</span> <span class="st">"path/to/results"</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">Strategus</span><span class="fu">::</span><span class="fu"><a href="../reference/createResultDataModel.html">createResultDataModel</a></span><span class="op">(</span></span>
<span>  analysisSpecifications <span class="op">=</span> <span class="va">analysisSpecifications</span>,</span>
<span>  resultsDataModelSettings <span class="op">=</span> <span class="va">resultsDataModelSettings</span>,</span>
<span>  resultsConnectionDetails <span class="op">=</span> <span class="va">resultsConnectionDetails</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>NOTE:</strong>: The script above assumes you have set up the
<code>study_results</code> schema before running this script. It also
assumes that the <code>study_results</code> schema is empty. If you need
to re-create the results data model for some reason, you will need to
manually drop all of the tables and then you can re-use this script to
create the tables.</p>
<p>For more information on the tables and relationships in the results
data model please see the <a href="https://ohdsi.github.io/Strategus/results-schema/index.html">results
data model documentation</a>.</p>
</div>
<div class="section level4">
<h4 id="uploading-results">Uploading results<a class="anchor" aria-label="anchor" href="#uploading-results"></a>
</h4>
<p>We will use the same inputs from the
<code>createResultDataModel</code> to call the
<code>uploadResults</code> function to upload the results to the results
database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">Strategus</span><span class="fu">::</span><span class="fu"><a href="../reference/uploadResults.html">uploadResults</a></span><span class="op">(</span></span>
<span>  analysisSpecifications <span class="op">=</span> <span class="va">analysisSpecifications</span>,</span>
<span>  resultsDataModelSettings <span class="op">=</span> <span class="va">resultsDataModelSettings</span>,</span>
<span>  resultsConnectionDetails <span class="op">=</span> <span class="va">resultsConnectionDetails</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="reviewing-results-using-r-shiny">Reviewing results using R Shiny<a class="anchor" aria-label="anchor" href="#reviewing-results-using-r-shiny"></a>
</h4>
<p>We will use the <a href="https://ohdsi.github.io/ShinyAppBuilder/" class="external-link">ShinyAppBuilder</a> and
<a href="https://ohdsi.github.io/OhdsiShinyModules/" class="external-link">OhdsiShinyModules</a>
to connect to the results database to review results. The code below is
used to create a configuration that tells the Shiny results viewer which
modules were used in the study and then it will launch the results
viewer application and connect to the PostgreSQL database specified in
the <code>resultsConnectionDetails</code> and display the results stored
in the <code>study_results</code> schema.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ShinyAppBuilder</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">OhdsiShinyModules</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ADD OR REMOVE MODULES TAILORED TO YOUR STUDY</span></span>
<span><span class="va">shinyConfig</span> <span class="op">&lt;-</span> <span class="fu">initializeModuleConfig</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultAboutConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultDatasourcesConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultCohortGeneratorConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultCohortDiagnosticsConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultCharacterizationConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultPredictionConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">addModuleConfig</span><span class="op">(</span></span>
<span>    <span class="fu">createDefaultEstimationConfig</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># now create the shiny app based on the config file and view the results</span></span>
<span><span class="co"># based on the connection</span></span>
<span><span class="fu">ShinyAppBuilder</span><span class="fu">::</span><span class="fu">createShinyApp</span><span class="op">(</span></span>
<span>  config <span class="op">=</span> <span class="va">shinyConfig</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="va">resultsConnectionDetails</span>,</span>
<span>  resultDatabaseSettings <span class="op">=</span> <span class="fu">createDefaultResultDatabaseSettings</span><span class="op">(</span>schema <span class="op">=</span> <span class="st">"study_results"</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Celecoxib vs. Diclofinac for the risk of GI Bleed"</span>,</span>
<span>  studyDescription <span class="op">=</span> <span class="st">"This study is showcasing the capabilities of running Strategus on Eunomia."</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anthony Sena, Martijn Schuemie, Jamie Gilbert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
